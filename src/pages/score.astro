---
import Layout from '../layouts/Layout.astro';
---

<Layout>
  <main class="container mx-auto px-4 py-20 text-center">
    <h1 class="text-4xl font-bold text-blue-700 mb-8">🎯 Resume Score</h1>

    <div class="max-w-2xl mx-auto bg-white shadow-md rounded-lg p-6 mb-10">
      <h2 class="text-2xl font-semibold mb-4">Your Score:</h2>
      <p id="score" class="text-5xl font-bold text-green-600 mb-6">Loading...</p>

      <h3 class="text-xl font-bold text-blue-700 mb-2">✅ Strengths</h3>
      <p id="strengths" class="text-gray-700 mb-6">Loading...</p>

      <h3 class="text-xl font-bold text-yellow-600 mb-2">⚠️ Improvements</h3>
      <p id="improvements" class="text-gray-700">Loading...</p>
    </div>

    <!-- Simulated Ad Section -->
    <div id="ad-section" class="max-w-2xl mx-auto bg-gray-100 border border-dashed border-gray-400 rounded-lg p-6 mb-6">
      <p class="text-gray-500">🔒 Please watch this ad to unlock your resume download.</p>
      <p class="text-sm mt-2 italic">(* This will be replaced with a real Google AdSense block later)</p>
    </div>

    <!-- Hidden Resume Download Button -->
    <div id="download-section" class="hidden mt-6">
      <a href="/resume.pdf" download class="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition">
        📄 Download Your Resume
      </a>
    </div>

    <a href="/" class="block mt-8 text-blue-500 hover:underline">← Back to Home</a>
  </main>

  <script>
    const params = new URLSearchParams(window.location.search);
    document.getElementById("score").innerText = params.get("score") || "Not available";
    document.getElementById("strengths").innerText = decodeURIComponent(params.get("strengths") || "Not provided");
    document.getElementById("improvements").innerText = decodeURIComponent(params.get("improvements") || "Not provided");

    // Timer to show download button after 15 seconds
    setTimeout(() => {
      document.getElementById("download-section").classList.remove("hidden");
      document.getElementById("ad-section").classList.add("hidden");
    }, 15000); // 15 seconds
  </script>
</Layout>
