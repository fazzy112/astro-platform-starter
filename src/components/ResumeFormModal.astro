<script is:inline>
  document.addEventListener("DOMContentLoaded", () => {
    const openBtn = document.getElementById("open-resume-form");
    const modal = document.getElementById("resume-form-modal");
    const form = document.getElementById("resume-form");

    if (openBtn && modal) {
      openBtn.addEventListener("click", () => {
        modal.classList.remove("hidden");
      });
    }

    if (form) {
      form.addEventListener("submit", (e) => {
        e.preventDefault();

        const formData = new FormData(form);
        const resumeData = {
          name: formData.get("name"),
          email: formData.get("email"),
          job: formData.get("job"),
          education: formData.get("education"),
          experience: formData.get("experience"),
          skills: formData.get("skills"),
          coverLetter: formData.get("cover-letter") ? "yes" : "no",
        };

        const combinedText = `
          Name: ${resumeData.name}
          Email: ${resumeData.email}
          Job Title: ${resumeData.job}
          Education: ${resumeData.education}
          Experience: ${resumeData.experience}
          Skills: ${resumeData.skills}
        `;

        localStorage.setItem("old_resume", combinedText.trim());
        localStorage.setItem("job", resumeData.job);
        localStorage.setItem("generate_cover_letter", resumeData.coverLetter);

        window.location.href = "/processing";
      });
    }
  });
</script>
